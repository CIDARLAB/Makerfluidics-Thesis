\chapter{The MakerFluidics Framework}
\label{chapter:mf}
\thispagestyle{myheadings}

% set this to the location of the figures for this chapter. it may
% also want to be ../Figures/2_Body/ or something. make sure that
% it has a trailing directory separator (i.e., '/')!
\graphicspath{{2_MakerFluidics/Figures/}}

\section{Introduction}
\label{sec:mfIntro}

MakerFluidics is a microfluidic fabrication and control paradigm that operates within a set of constraints guided by the ideals of automation and the modern ``maker movement''. This paradigm integrates into the larger microfluidic design flow shown in Figure \ref{fig:fullflow}, but it can also be employed on its own. MakerFluidics accepts physical and temporal valve control requirements and a microfluidic device layout as inputs and generates all of the necessary control software, manufacturing files and assembly information required to build a self-contained microfluidic device and control infrastructure.

\section{Problem Statement}
\label{sec:mfPS}
A significant aim of the modern maker movement is to make technology and technological ``know-how'' accessible to the masses. One way to accomplish this goal is to devise solutions using resources that are flexible and ubiquitous \cite{schrock2014education}. A significant criticism often levied against the field of microfluidics is its high barrier to entry often as a result of the need for highly specialized fabrication and control equipment as well as expertise that is typically found only in labs dedicated to microfabrication \cite{whitesides2006}. This work seeks to create a design-to-device, automated microfluidic work-flow constrained by the ideals espoused in maker culture. 

\begin{figure}[h]
  \begin{minipage}[t]{0.99\linewidth}\centering
    \includegraphics[width=14cm]{fullflow.pdf}
    \medskip
  \end{minipage}\hfill
  \caption[Specify--Design--Build Workflow]{MakerFluidics is part of a larger microfluidic design flow that spans from biological specification to microfluidic fabrication and control}
    \label{fig:fullflow}
\end{figure}


\section{Contstraints}
\label{sec:mfConstraints}
An important goal of the maker movement is to increase technology's accessibility. This ideal is levied on MakerFluidics in the form of a series of constraints, the first of which is that all fabrication equipment must be sourced through ubiquitous consumer and retail product outlets such as Amazon.com in the Unites States, or Amazon.ca, .co.uk, .jp, etc. internationally, and each individual piece of equipment required for fabrication and control must cost less than \$100. A desktop CNC mill and 3D printer are excepted from this constraint on the basis that they are common maker-space tools with a wide variety of uses extending well beyond the field of microfluidics; the cost of the CNC mill (Othermill, Othermachine Co.) and 3D printer (Ultimaker 2, Ultimaker B.V.) used in our lab are each less than \$2,500. Additionally, all elements of the complete software tool chain must be free and/or open-source. 

To further facilitate microfluidic accessibility, all fabrication and control protocols must be accomplished without specialized infrastructure beyond a wall electrical outlet. This excludes fume hoods, clean room facilities, tank storage, vacuum lines and corona/plasma bonders. The process for designing, fabricating and controlling programmable (i.e., valved) microfluidics within the specified constraints is explored. Each stage of the process includes a comparison of current methods to methods developed or adopted by the MakerFluidics framework. 

\section{Microfluidic Design}
\label{sec:mfDesign}

\section{Microfluidic Fabrication}
\label{sec:mfFabrication}
The fabrication of a microfluidic device typically has two main steps: pattern geometries and seal layers \cite{mcdonald2002poly}.

Channel and valve geometries are etched in thermoplastic polymers using a desktop CNC mill. This stands in sharp contrast from conventional methods of microfluidic fabrication, namely photolithography and wet etching, which require the use of clean room facilities and highly specialized equipment. The CNC approach is well-suited for integrating valving technologies such as monolithic membrane valves \cite{grover2003monolithic} (Figure \ref{fig:valves}) and centrifugal capillary valves \cite{madou1998labcd}. A significant trade-off for the relative ease of CNC milling thermoplastics using a desktop (i.e., not industrial-grade) CNC mill is that the maximum resolution is ~25$\mu$m with an exponential increase in reliability seen at feature sizes greater than 250$\mu$m \cite{guckenberger2015micromilling}, whereas microfluidic geometries using conventional methods such as photolithography can reliably achieve features smaller than 1$\mu$m \cite{mcdonald2002poly}.

\begin{figure}[h]
  \begin{minipage}[t]{0.99\linewidth}\centering
    \includegraphics[width=14cm]{valves.pdf}
    \medskip
  \end{minipage}\hfill
  \caption[Illustration of valving primitive]{Normally-closed monolithic membrane valves \cite{grover2003monolithic} are realized by introducing discontinuities in the flow layer (blue) and a corresponding pneumatic cavity in the control layer (red). These two layers are separated by a PDMS membrane. To open the valve a vacuum is introduced into the cavity in the control layer.}
    \label{fig:valves}
\end{figure}

Once geometries are etched into the desired substrate, sealing these channels becomes the next challenge. Polydimethylsiloxane (PDMS) is a common material for fabricating microfluidics \cite{mcdonald2002poly} and is also commonly used to encapsulate solar panels and outdoor lighting. It is because of the latter property that PDMS (Sylgard 184, Dow Corning) is available through retail outlets, such as Amazon, and, thus, falls within the constraints for adoption by the MakerFluidics fabrication paradigm. PDMS can be sealed irreversibly through modifications to its surface chemistry via plasma or corona exposure or sealed reversibly simply using the material's inherent Van der Waals attraction to various materials including itself, glass and thermoplastics \cite{mcdonald2002poly}. Since irreversible sealing through surface treatments involves specialized machinery, MakerFluidics employs the latter method via Van der Waals force. The trade-off being that the reversible seal cannot withstand pressures greater than 5psi \cite{mcdonald2002poly}. Using these techniques we have fabricated a number of continuous flow devices inluding the device shown in Figure \ref{fig:fullflow} as well as centrifugal microfluidic systems.

\begin{figure}[h]
  \begin{minipage}[t]{0.99\linewidth}\centering
    \includegraphics[width=14cm]{fabFlow.pdf}
    \medskip
  \end{minipage}\hfill
  \caption[MakerFluidics Fabrication Protocol]{Workflow for fabricating microfluidics using the MakerFluidics framework.}
    \label{fig:fabFlow}
\end{figure}


\section{Experimental Control}
\label{sec:mfControl}
MakerFluidics views experimental conditions as a sequence of temporally-specified valve conditions. This necessitates a data structure consisting of an enumerated array of valve objects and a sequence of temporal specifications regarding their state. This data structure is automatically generated by microfluidic CAD software developed in CIDAR Lab, but it can also be created manually as a series of wait statements and valve conditions shown in Figure \ref{fig:sequence}. These valve objects are linked to the microfluidic layout provided to the fabrication software through the use of a JSON object for display in a graphical user interface (GUI).

Pneumatics are provided through an array of 3D printed syringe pumps controlled by custom firmware on an Arduino microcontroller. This microcontroller receives serial commands derived from the GUI running on a host computer. The MakerFluidics control GUI and firmware is extensible and interoperable with a conventional, solenoid-driven control infrastructure.


\begin{figure}[h]
  \begin{minipage}[t]{0.99\linewidth}\centering
    \includegraphics[width=14cm]{sequence.pdf}
    \medskip
  \end{minipage}\hfill
  \caption[Valving sequence temporal specification]{The temporal specification (A) \cite{thies2008} for a device containing six valves (B, C). The specification in (A) dictates the set of conditions in (B) to begin the assay. After 2000ms the valves change state to that shown in (C), thus affecting the movement of fluid through the device.}
    \label{fig:sequence}
\end{figure}
